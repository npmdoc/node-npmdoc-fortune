<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="http://fortune.js.org">fortune (v5.2.2)</a>
</h1>
<h4>Database abstraction layer that implements common features for Node.js and web browsers.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune">module fortune</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.fortune">
            function <span class="apidocSignatureSpan"></span>fortune
            <span class="apidocSignatureSpan">(recordTypes, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter">
            function <span class="apidocSignatureSpan">fortune.</span>Adapter
            <span class="apidocSignatureSpan">(properties)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.DefaultAdapter">
            function <span class="apidocSignatureSpan">fortune.</span>Adapter.DefaultAdapter
            <span class="apidocSignatureSpan">(properties)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Promise">
            function <span class="apidocSignatureSpan">fortune.</span>Promise
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.adapters.memory">
            function <span class="apidocSignatureSpan">fortune.</span>adapters.memory
            <span class="apidocSignatureSpan">(properties)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.message">
            function <span class="apidocSignatureSpan">fortune.</span>message
            <span class="apidocSignatureSpan">(id, language, data)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>Adapter.DefaultAdapter.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>Adapter.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>adapters</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>adapters.memory.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>common</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>errors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>errors.nativeErrors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>events</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>index</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>methods</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>promise</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>response_classes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>success</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.</span>update_helpers</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.Adapter">module fortune.Adapter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.Adapter">
            function <span class="apidocSignatureSpan">fortune.</span>Adapter
            <span class="apidocSignatureSpan">(properties)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.DefaultAdapter">
            function <span class="apidocSignatureSpan">fortune.Adapter.</span>DefaultAdapter
            <span class="apidocSignatureSpan">(properties)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.Adapter.</span>features</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.Adapter.DefaultAdapter">module fortune.Adapter.DefaultAdapter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.DefaultAdapter.DefaultAdapter">
            function <span class="apidocSignatureSpan">fortune.Adapter.</span>DefaultAdapter
            <span class="apidocSignatureSpan">(properties)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.</span>common</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.</span>features</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.Adapter.DefaultAdapter.prototype">module fortune.Adapter.DefaultAdapter.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.DefaultAdapter.prototype.connect">
            function <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.prototype.</span>connect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.DefaultAdapter.prototype.create">
            function <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.prototype.</span>create
            <span class="apidocSignatureSpan">(type, records, meta)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.DefaultAdapter.prototype.delete">
            function <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.prototype.</span>delete
            <span class="apidocSignatureSpan">(type, ids)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.DefaultAdapter.prototype.disconnect">
            function <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.prototype.</span>disconnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.DefaultAdapter.prototype.find">
            function <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.prototype.</span>find
            <span class="apidocSignatureSpan">(type, ids, options, meta)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.DefaultAdapter.prototype.update">
            function <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.prototype.</span>update
            <span class="apidocSignatureSpan">(type, updates)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.Adapter.prototype">module fortune.Adapter.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.prototype.applyOperators">
            function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>applyOperators
            <span class="apidocSignatureSpan">(record)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.prototype.beginTransaction">
            function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>beginTransaction
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.prototype.connect">
            function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>connect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.prototype.create">
            function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>create
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.prototype.delete">
            function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>delete
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.prototype.disconnect">
            function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>disconnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.prototype.endTransaction">
            function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>endTransaction
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.prototype.find">
            function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>find
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.Adapter.prototype.update">
            function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>update
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.adapters">module fortune.adapters</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.adapters.memory">
            function <span class="apidocSignatureSpan">fortune.adapters.</span>memory
            <span class="apidocSignatureSpan">(properties)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.adapters.memory">module fortune.adapters.memory</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.adapters.memory.memory">
            function <span class="apidocSignatureSpan">fortune.adapters.</span>memory
            <span class="apidocSignatureSpan">(properties)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.adapters.memory.</span>common</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.adapters.memory.</span>features</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.adapters.memory.prototype">module fortune.adapters.memory.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.adapters.memory.prototype.connect">
            function <span class="apidocSignatureSpan">fortune.adapters.memory.prototype.</span>connect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.adapters.memory.prototype.create">
            function <span class="apidocSignatureSpan">fortune.adapters.memory.prototype.</span>create
            <span class="apidocSignatureSpan">(type, records, meta)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.adapters.memory.prototype.delete">
            function <span class="apidocSignatureSpan">fortune.adapters.memory.prototype.</span>delete
            <span class="apidocSignatureSpan">(type, ids)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.adapters.memory.prototype.disconnect">
            function <span class="apidocSignatureSpan">fortune.adapters.memory.prototype.</span>disconnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.adapters.memory.prototype.find">
            function <span class="apidocSignatureSpan">fortune.adapters.memory.prototype.</span>find
            <span class="apidocSignatureSpan">(type, ids, options, meta)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.adapters.memory.prototype.update">
            function <span class="apidocSignatureSpan">fortune.adapters.memory.prototype.</span>update
            <span class="apidocSignatureSpan">(type, updates)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.common">module fortune.common</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.common.applyOptions">
            function <span class="apidocSignatureSpan">fortune.common.</span>applyOptions
            <span class="apidocSignatureSpan">(fields, records, options, meta)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.common.generateId">
            function <span class="apidocSignatureSpan">fortune.common.</span>generateId
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.errors">module fortune.errors</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.BadRequestError">
            function <span class="apidocSignatureSpan">fortune.errors.</span>BadRequestError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.ConflictError">
            function <span class="apidocSignatureSpan">fortune.errors.</span>ConflictError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.ForbiddenError">
            function <span class="apidocSignatureSpan">fortune.errors.</span>ForbiddenError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.MethodError">
            function <span class="apidocSignatureSpan">fortune.errors.</span>MethodError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.NotAcceptableError">
            function <span class="apidocSignatureSpan">fortune.errors.</span>NotAcceptableError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.NotFoundError">
            function <span class="apidocSignatureSpan">fortune.errors.</span>NotFoundError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.UnauthorizedError">
            function <span class="apidocSignatureSpan">fortune.errors.</span>UnauthorizedError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.UnprocessableError">
            function <span class="apidocSignatureSpan">fortune.errors.</span>UnprocessableError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.UnsupportedError">
            function <span class="apidocSignatureSpan">fortune.errors.</span>UnsupportedError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.errors.</span>nativeErrors</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.errors.nativeErrors">module fortune.errors.nativeErrors</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.nativeErrors.0">
            function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>0
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.nativeErrors.1">
            function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>1
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.nativeErrors.2">
            function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>2
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.nativeErrors.3">
            function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>3
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.nativeErrors.4">
            function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>4
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.nativeErrors.5">
            function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>5
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.errors.nativeErrors.6">
            function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>6
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.index">module fortune.index</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.assign">
            function <span class="apidocSignatureSpan">fortune.index.</span>assign
            <span class="apidocSignatureSpan">(target)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.castToNumber">
            function <span class="apidocSignatureSpan">fortune.index.</span>castToNumber
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.castValue">
            function <span class="apidocSignatureSpan">fortune.index.</span>castValue
            <span class="apidocSignatureSpan">(value, type, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.clone">
            function <span class="apidocSignatureSpan">fortune.index.</span>clone
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.deepEqual">
            function <span class="apidocSignatureSpan">fortune.index.</span>deepEqual
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.filter">
            function <span class="apidocSignatureSpan">fortune.index.</span>filter
            <span class="apidocSignatureSpan">(array, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.find">
            function <span class="apidocSignatureSpan">fortune.index.</span>find
            <span class="apidocSignatureSpan">(array, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.generateId">
            function <span class="apidocSignatureSpan">fortune.index.</span>generateId
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.includes">
            function <span class="apidocSignatureSpan">fortune.index.</span>includes
            <span class="apidocSignatureSpan">(array, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.map">
            function <span class="apidocSignatureSpan">fortune.index.</span>map
            <span class="apidocSignatureSpan">(array, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.message">
            function <span class="apidocSignatureSpan">fortune.index.</span>message
            <span class="apidocSignatureSpan">(id, language, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.pull">
            function <span class="apidocSignatureSpan">fortune.index.</span>pull
            <span class="apidocSignatureSpan">(array, values)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.reduce">
            function <span class="apidocSignatureSpan">fortune.index.</span>reduce
            <span class="apidocSignatureSpan">(array, fn, initialValue)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.index.unique">
            function <span class="apidocSignatureSpan">fortune.index.</span>unique
            <span class="apidocSignatureSpan">(a)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.index.</span>constants</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.index.</span>errors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.index.</span>events</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.index.</span>keys</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.index.</span>methods</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.index.</span>responses</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.index.</span>successes</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.promise">module fortune.promise</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.promise.Promise">
            function <span class="apidocSignatureSpan">fortune.promise.</span>Promise
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.response_classes">module fortune.response_classes</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.response_classes.BadRequestError">
            function <span class="apidocSignatureSpan">fortune.response_classes.</span>BadRequestError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.response_classes.ConflictError">
            function <span class="apidocSignatureSpan">fortune.response_classes.</span>ConflictError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.response_classes.Created">
            function <span class="apidocSignatureSpan">fortune.response_classes.</span>Created
            <span class="apidocSignatureSpan">(x)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.response_classes.Empty">
            function <span class="apidocSignatureSpan">fortune.response_classes.</span>Empty
            <span class="apidocSignatureSpan">(x)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.response_classes.ForbiddenError">
            function <span class="apidocSignatureSpan">fortune.response_classes.</span>ForbiddenError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.response_classes.MethodError">
            function <span class="apidocSignatureSpan">fortune.response_classes.</span>MethodError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.response_classes.NotAcceptableError">
            function <span class="apidocSignatureSpan">fortune.response_classes.</span>NotAcceptableError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.response_classes.NotFoundError">
            function <span class="apidocSignatureSpan">fortune.response_classes.</span>NotFoundError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.response_classes.OK">
            function <span class="apidocSignatureSpan">fortune.response_classes.</span>OK
            <span class="apidocSignatureSpan">(x)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.response_classes.UnauthorizedError">
            function <span class="apidocSignatureSpan">fortune.response_classes.</span>UnauthorizedError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.response_classes.UnprocessableError">
            function <span class="apidocSignatureSpan">fortune.response_classes.</span>UnprocessableError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.response_classes.UnsupportedError">
            function <span class="apidocSignatureSpan">fortune.response_classes.</span>UnsupportedError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">fortune.response_classes.</span>nativeErrors</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.success">module fortune.success</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.success.Created">
            function <span class="apidocSignatureSpan">fortune.success.</span>Created
            <span class="apidocSignatureSpan">(x)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.success.Empty">
            function <span class="apidocSignatureSpan">fortune.success.</span>Empty
            <span class="apidocSignatureSpan">(x)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.success.OK">
            function <span class="apidocSignatureSpan">fortune.success.</span>OK
            <span class="apidocSignatureSpan">(x)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.fortune.update_helpers">module fortune.update_helpers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.update_helpers.addId">
            function <span class="apidocSignatureSpan">fortune.update_helpers.</span>addId
            <span class="apidocSignatureSpan">(id, update, field, isArray)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.update_helpers.getUpdate">
            function <span class="apidocSignatureSpan">fortune.update_helpers.</span>getUpdate
            <span class="apidocSignatureSpan">(type, id, updates, cache)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.update_helpers.removeId">
            function <span class="apidocSignatureSpan">fortune.update_helpers.</span>removeId
            <span class="apidocSignatureSpan">(id, update, field, isArray)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.fortune.update_helpers.scrubDenormalizedUpdates">
            function <span class="apidocSignatureSpan">fortune.update_helpers.</span>scrubDenormalizedUpdates
            <span class="apidocSignatureSpan">(updates, denormalizedFields)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune" id="apidoc.module.fortune">module fortune</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.fortune" id="apidoc.element.fortune.fortune">
        function <span class="apidocSignatureSpan"></span>fortune
        <span class="apidocSignatureSpan">(recordTypes, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Fortune(recordTypes, options) {
  if (!(this instanceof Fortune))
    return new Fortune(recordTypes, options)

  this.constructor(recordTypes, options)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter" id="apidoc.element.fortune.Adapter">
        function <span class="apidocSignatureSpan">fortune.</span>Adapter
        <span class="apidocSignatureSpan">(properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Adapter(properties) {
  assign(this, properties)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.DefaultAdapter" id="apidoc.element.fortune.Adapter.DefaultAdapter">
        function <span class="apidocSignatureSpan">fortune.</span>Adapter.DefaultAdapter
        <span class="apidocSignatureSpan">(properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MemoryAdapter(properties) {
  Adapter.call(this, properties)
  if (!this.options) this.options = {}
  if (!('recordsPerType' in this.options))
    this.options.recordsPerType = 1000
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Promise" id="apidoc.element.fortune.Promise">
        function <span class="apidocSignatureSpan">fortune.</span>Promise
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Promise() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.adapters.memory" id="apidoc.element.fortune.adapters.memory">
        function <span class="apidocSignatureSpan">fortune.</span>adapters.memory
        <span class="apidocSignatureSpan">(properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MemoryAdapter(properties) {
  Adapter.call(this, properties)
  if (!this.options) this.options = {}
  if (!('recordsPerType' in this.options))
    this.options.recordsPerType = 1000
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.message" id="apidoc.element.fortune.message">
        function <span class="apidocSignatureSpan">fortune.</span>message
        <span class="apidocSignatureSpan">(id, language, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function message(id, language, data) {
  var str, key, subtag

  if (!message.hasOwnProperty(language)) {
    subtag = language &amp;&amp; language.match(/.+?(?=-)/)
    if (subtag) subtag = subtag[0]
    if (message.hasOwnProperty(subtag)) language = subtag
    else language = message.defaultLanguage
  }

  if (!message[language].hasOwnProperty(id))
    return message[language][genericMessage] || message.en[genericMessage]

  str = message[language][id]

  for (key in data) str = str.replace('{' + key + '}', data[key])

  return str
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.Adapter" id="apidoc.module.fortune.Adapter">module fortune.Adapter</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.Adapter.Adapter" id="apidoc.element.fortune.Adapter.Adapter">
        function <span class="apidocSignatureSpan">fortune.</span>Adapter
        <span class="apidocSignatureSpan">(properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Adapter(properties) {
  assign(this, properties)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.DefaultAdapter" id="apidoc.element.fortune.Adapter.DefaultAdapter">
        function <span class="apidocSignatureSpan">fortune.Adapter.</span>DefaultAdapter
        <span class="apidocSignatureSpan">(properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MemoryAdapter(properties) {
  Adapter.call(this, properties)
  if (!this.options) this.options = {}
  if (!('recordsPerType' in this.options))
    this.options.recordsPerType = 1000
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.Adapter.DefaultAdapter" id="apidoc.module.fortune.Adapter.DefaultAdapter">module fortune.Adapter.DefaultAdapter</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.Adapter.DefaultAdapter.DefaultAdapter" id="apidoc.element.fortune.Adapter.DefaultAdapter.DefaultAdapter">
        function <span class="apidocSignatureSpan">fortune.Adapter.</span>DefaultAdapter
        <span class="apidocSignatureSpan">(properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MemoryAdapter(properties) {
  Adapter.call(this, properties)
  if (!this.options) this.options = {}
  if (!('recordsPerType' in this.options))
    this.options.recordsPerType = 1000
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.Adapter.DefaultAdapter.prototype" id="apidoc.module.fortune.Adapter.DefaultAdapter.prototype">module fortune.Adapter.DefaultAdapter.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.Adapter.DefaultAdapter.prototype.connect" id="apidoc.element.fortune.Adapter.DefaultAdapter.prototype.connect">
        function <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.prototype.</span>connect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function () {
  var Promise = promise.Promise
  var recordTypes = this.recordTypes
  var type

  this.db = {}

  for (type in recordTypes)
    this.db[type] = {}

  return Promise.resolve()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// The `fortuneHTTP` function returns a listener function which does
// content negotiation, and maps the internal response to a HTTP response.
const listener = fortuneHTTP(store)
const server = http.createServer((request, response) =&gt;
  listener(request, response)
  .catch(error =&gt; { /* error logging */ }))

store.<span class="apidocCodeKeywordSpan">connect</span>().then(() =&gt; server.listen(1337))
```

This yields an *ad hoc* JSON over HTTP API, as well as a HTML interface for humans. There are also serializers for [Micro API](https
://github.com/fortunejs/fortune-micro-api) (JSON-LD) and [JSON API](https://github.com/fortunejs/fortune-json-api).

Fortune.js implements its own [wire protocol](https://github.com/fortunejs/fortune-ws) based on [WebSocket](https://developer.mozilla
.org/docs/Web/API/WebSockets_API) and [MessagePack](http://msgpack.org), which is useful for soft real-time applications.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.DefaultAdapter.prototype.create" id="apidoc.element.fortune.Adapter.DefaultAdapter.prototype.create">
        function <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.prototype.</span>create
        <span class="apidocSignatureSpan">(type, records, meta)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (type, records, meta) {
  var Promise = promise.Promise
  var self = this
  var message = self.message
  var recordsPerType = self.options.recordsPerType
  var primaryKey = self.keys.primary
  var ConflictError = self.errors.ConflictError
  var collection = self.db[type]
  var i, j, record, id, ids, language

  if (!meta) meta = {}
  language = meta.language

  records = map(records, function (record) {
    return inputRecord.call(self, type, record)
  })

  // First check for collisions.
  for (i = 0, j = records.length; i &lt; j; i++) {
    record = records[i]
    id = record[primaryKey]

    if (collection.hasOwnProperty(id))
      return Promise.reject(new ConflictError(
        message('RecordExists', language, { id: id })))
  }

  // Then save it to memory.
  for (i = 0, j = records.length; i &lt; j; i++) {
    record = records[i]
    collection[record[primaryKey]] = record
  }

  // Clear least recently used records.
  if (recordsPerType) {
    ids = Object.keys(collection)

    if (ids.length &gt; recordsPerType) {
      ids = ids.slice(0, ids.length - recordsPerType)

      for (i = 0, j = ids.length; i &lt; j; i++)
        delete collection[ids[i]]
    }
  }

  return Promise.resolve(map(records, function (record) {
    return outputRecord.call(self, type, record)
  }))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```js
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.find(type, ids, options, include, meta)
store.<span class="apidocCodeKeywordSpan">create</span>(type, records, include, meta) // Records required.
store.update(type, updates, include, meta) // Updates required.
store.delete(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.DefaultAdapter.prototype.delete" id="apidoc.element.fortune.Adapter.DefaultAdapter.prototype.delete">
        function <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.prototype.</span>delete
        <span class="apidocSignatureSpan">(type, ids)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delete = function (type, ids) {
  var Promise = promise.Promise
  var collection = this.db[type]
  var count = 0
  var i, j, id

  if (ids &amp;&amp; !ids.length) return Adapter.prototype.delete.call(this)

  if (ids) for (i = 0, j = ids.length; i &lt; j; i++) {
    id = ids[i]
    if (collection[id]) {
      delete collection[id]
      count++
    }
  }

  else for (id in collection) {
    delete collection[id]
    count++
  }

  return Promise.resolve(count)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.find(type, ids, options, include, meta)
store.create(type, records, include, meta) // Records required.
store.update(type, updates, include, meta) // Updates required.
store.<span class="apidocCodeKeywordSpan">delete</span>(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```

The first method call to interact with the database will trigger a connection to the data store, and it returns the result as a
Promise. The specific methods wrap around the more general `request` method, see the [API documentation for `request`](http://fortune
.js.org/api/#fortune-request).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.DefaultAdapter.prototype.disconnect" id="apidoc.element.fortune.Adapter.DefaultAdapter.prototype.disconnect">
        function <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.prototype.</span>disconnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">disconnect = function () {
  var Promise = promise.Promise

  delete this.db
  return Promise.resolve()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (self.connectionStatus !== 2)
  return Promise.reject(new Error('Instance has not been connected.'))

self.connectionStatus = 1

return new Promise(function (resolve, reject) {
  return self.adapter.<span class="apidocCodeKeywordSpan">disconnect</span>().then(function () {
    self.connectionStatus = 0
    self.emit(events.disconnect)
    return resolve(self)
  }, function (error) {
    self.connectionStatus = 2
    self.emit(events.failure)
    return reject(error)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.DefaultAdapter.prototype.find" id="apidoc.element.fortune.Adapter.DefaultAdapter.prototype.find">
        function <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.prototype.</span>find
        <span class="apidocSignatureSpan">(type, ids, options, meta)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">find = function (type, ids, options, meta) {
  var Promise = promise.Promise
  var self = this
  var recordTypes = self.recordTypes
  var fields = recordTypes[type]
  var collection = self.db[type]
  var records = []
  var i, j, id, record

  if (ids &amp;&amp; !ids.length) return Adapter.prototype.find.call(self)

  if (ids) for (i = 0, j = ids.length; i &lt; j; i++) {
    id = ids[i]
    if (collection.hasOwnProperty(id)) {
      record = collection[id]

      // LRU update.
      delete collection[id]
      collection[id] = record

      records.push(outputRecord.call(self, type, record))
    }
  }

  else for (id in collection)
    records.push(outputRecord.call(self, type, collection[id]))

  return Promise.resolve(applyOptions(fields, records, options, meta))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Fortune has 4 main methods: `find`, `create`, `update`, &amp; `delete`, which correspond to [CRUD](https://en.wikipedia.org/wiki
/Create,_read,_update_and_delete). The method signatures are as follows:

```js
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.<span class="apidocCodeKeywordSpan">find</span>(type, ids, options, include, meta)
store.create(type, records, include, meta) // Records required.
store.update(type, updates, include, meta) // Updates required.
store.delete(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.DefaultAdapter.prototype.update" id="apidoc.element.fortune.Adapter.DefaultAdapter.prototype.update">
        function <span class="apidocSignatureSpan">fortune.Adapter.DefaultAdapter.prototype.</span>update
        <span class="apidocSignatureSpan">(type, updates)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (type, updates) {
  var Promise = promise.Promise
  var self = this
  var primaryKey = self.keys.primary
  var collection = self.db[type]
  var count = 0
  var i, j, update, id, record

  if (!updates.length) return Adapter.prototype.update.call(self)

  for (i = 0, j = updates.length; i &lt; j; i++) {
    update = updates[i]
    id = update[primaryKey]
    record = collection[id]

    if (!record) continue

    count++
    record = outputRecord.call(self, type, record)

    applyUpdate(record, update)

    // LRU update.
    delete collection[id]

    collection[id] = inputRecord.call(self, type, record)
  }

  return Promise.resolve(count)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```js
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.find(type, ids, options, include, meta)
store.create(type, records, include, meta) // Records required.
store.<span class="apidocCodeKeywordSpan">update</span>(type, updates, include, meta) // Updates required.
store.delete(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```

The first method call to interact with the database will trigger a connection to the data store, and it returns the result as a
Promise. The specific methods wrap around the more general `request` method, see the [API documentation for `request`](http://fortune
.js.org/api/#fortune-request).
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.Adapter.prototype" id="apidoc.module.fortune.Adapter.prototype">module fortune.Adapter.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.Adapter.prototype.applyOperators" id="apidoc.element.fortune.Adapter.prototype.applyOperators">
        function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>applyOperators
        <span class="apidocSignatureSpan">(record)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">applyOperators = function (record) {
  return record
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
record = assign({}, record)

// Apply updates to record.
applyUpdate(record, update)

// Apply operators to record.
if (update.operate)
  record = adapter.<span class="apidocCodeKeywordSpan">applyOperators</span>(record, update.operate)

// Enforce the fields.
enforce(type, record, fields, meta)

// Ensure referential integrity.
return checkLinks.call(self, transaction, record, fields, links, meta)
.then(function (linked) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.prototype.beginTransaction" id="apidoc.element.fortune.Adapter.prototype.beginTransaction">
        function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>beginTransaction
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">beginTransaction = function () {
  var Promise = promise.Promise
  return Promise.resolve(this)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    message('InvalidType', language, { type: type }))

// Block invalid method.
if (!(method in flows))
  throw new MethodError(
    message('InvalidMethod', language, { method: method }))

return adapter.<span class="apidocCodeKeywordSpan">beginTransaction</span>()
  })

  .then(function (transaction) {
var chain, flow, i, j

context.transaction = transaction
chain = Promise.resolve(context)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.prototype.connect" id="apidoc.element.fortune.Adapter.prototype.connect">
        function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>connect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function () {
  var Promise = promise.Promise
  return Promise.resolve()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// The `fortuneHTTP` function returns a listener function which does
// content negotiation, and maps the internal response to a HTTP response.
const listener = fortuneHTTP(store)
const server = http.createServer((request, response) =&gt;
  listener(request, response)
  .catch(error =&gt; { /* error logging */ }))

store.<span class="apidocCodeKeywordSpan">connect</span>().then(() =&gt; server.listen(1337))
```

This yields an *ad hoc* JSON over HTTP API, as well as a HTML interface for humans. There are also serializers for [Micro API](https
://github.com/fortunejs/fortune-micro-api) (JSON-LD) and [JSON API](https://github.com/fortunejs/fortune-json-api).

Fortune.js implements its own [wire protocol](https://github.com/fortunejs/fortune-ws) based on [WebSocket](https://developer.mozilla
.org/docs/Web/API/WebSockets_API) and [MessagePack](http://msgpack.org), which is useful for soft real-time applications.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.prototype.create" id="apidoc.element.fortune.Adapter.prototype.create">
        function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>create
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function () {
  var Promise = promise.Promise
  return Promise.resolve([])
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```js
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.find(type, ids, options, include, meta)
store.<span class="apidocCodeKeywordSpan">create</span>(type, records, include, meta) // Records required.
store.update(type, updates, include, meta) // Updates required.
store.delete(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.prototype.delete" id="apidoc.element.fortune.Adapter.prototype.delete">
        function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>delete
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delete = function () {
  var Promise = promise.Promise
  return Promise.resolve(0)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.find(type, ids, options, include, meta)
store.create(type, records, include, meta) // Records required.
store.update(type, updates, include, meta) // Updates required.
store.<span class="apidocCodeKeywordSpan">delete</span>(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```

The first method call to interact with the database will trigger a connection to the data store, and it returns the result as a
Promise. The specific methods wrap around the more general `request` method, see the [API documentation for `request`](http://fortune
.js.org/api/#fortune-request).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.prototype.disconnect" id="apidoc.element.fortune.Adapter.prototype.disconnect">
        function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>disconnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">disconnect = function () {
  var Promise = promise.Promise
  return Promise.resolve()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (self.connectionStatus !== 2)
  return Promise.reject(new Error('Instance has not been connected.'))

self.connectionStatus = 1

return new Promise(function (resolve, reject) {
  return self.adapter.<span class="apidocCodeKeywordSpan">disconnect</span>().then(function () {
    self.connectionStatus = 0
    self.emit(events.disconnect)
    return resolve(self)
  }, function (error) {
    self.connectionStatus = 2
    self.emit(events.failure)
    return reject(error)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.prototype.endTransaction" id="apidoc.element.fortune.Adapter.prototype.endTransaction">
        function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>endTransaction
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">endTransaction = function () {
  var Promise = promise.Promise
  return Promise.resolve()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    for (i = 0, j = flow.length; i &lt; j; i++)
      chain = chain.then(flow[i])

    return chain
  })

  .then(function (context) {
    return context.transaction.<span class="apidocCodeKeywordSpan">endTransaction</span>()
      .then(function () {
var method = context.request.method
var response = context.response
var payload = response.payload

if (!payload) return new Empty(response)
if (method === createMethod) return new Created(response)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.prototype.find" id="apidoc.element.fortune.Adapter.prototype.find">
        function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>find
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">find = function () {
  var Promise = promise.Promise
  var results = []
  results.count = 0
  return Promise.resolve(results)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Fortune has 4 main methods: `find`, `create`, `update`, &amp; `delete`, which correspond to [CRUD](https://en.wikipedia.org/wiki
/Create,_read,_update_and_delete). The method signatures are as follows:

```js
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.<span class="apidocCodeKeywordSpan">find</span>(type, ids, options, include, meta)
store.create(type, records, include, meta) // Records required.
store.update(type, updates, include, meta) // Updates required.
store.delete(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.Adapter.prototype.update" id="apidoc.element.fortune.Adapter.prototype.update">
        function <span class="apidocSignatureSpan">fortune.Adapter.prototype.</span>update
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function () {
  var Promise = promise.Promise
  return Promise.resolve(0)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```js
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.find(type, ids, options, include, meta)
store.create(type, records, include, meta) // Records required.
store.<span class="apidocCodeKeywordSpan">update</span>(type, updates, include, meta) // Updates required.
store.delete(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```

The first method call to interact with the database will trigger a connection to the data store, and it returns the result as a
Promise. The specific methods wrap around the more general `request` method, see the [API documentation for `request`](http://fortune
.js.org/api/#fortune-request).
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.adapters" id="apidoc.module.fortune.adapters">module fortune.adapters</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.adapters.memory" id="apidoc.element.fortune.adapters.memory">
        function <span class="apidocSignatureSpan">fortune.adapters.</span>memory
        <span class="apidocSignatureSpan">(properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MemoryAdapter(properties) {
  Adapter.call(this, properties)
  if (!this.options) this.options = {}
  if (!('recordsPerType' in this.options))
    this.options.recordsPerType = 1000
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.adapters.memory" id="apidoc.module.fortune.adapters.memory">module fortune.adapters.memory</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.adapters.memory.memory" id="apidoc.element.fortune.adapters.memory.memory">
        function <span class="apidocSignatureSpan">fortune.adapters.</span>memory
        <span class="apidocSignatureSpan">(properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MemoryAdapter(properties) {
  Adapter.call(this, properties)
  if (!this.options) this.options = {}
  if (!('recordsPerType' in this.options))
    this.options.recordsPerType = 1000
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.adapters.memory.prototype" id="apidoc.module.fortune.adapters.memory.prototype">module fortune.adapters.memory.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.adapters.memory.prototype.connect" id="apidoc.element.fortune.adapters.memory.prototype.connect">
        function <span class="apidocSignatureSpan">fortune.adapters.memory.prototype.</span>connect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function () {
  var Promise = promise.Promise
  var recordTypes = this.recordTypes
  var type

  this.db = {}

  for (type in recordTypes)
    this.db[type] = {}

  return Promise.resolve()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// The `fortuneHTTP` function returns a listener function which does
// content negotiation, and maps the internal response to a HTTP response.
const listener = fortuneHTTP(store)
const server = http.createServer((request, response) =&gt;
  listener(request, response)
  .catch(error =&gt; { /* error logging */ }))

store.<span class="apidocCodeKeywordSpan">connect</span>().then(() =&gt; server.listen(1337))
```

This yields an *ad hoc* JSON over HTTP API, as well as a HTML interface for humans. There are also serializers for [Micro API](https
://github.com/fortunejs/fortune-micro-api) (JSON-LD) and [JSON API](https://github.com/fortunejs/fortune-json-api).

Fortune.js implements its own [wire protocol](https://github.com/fortunejs/fortune-ws) based on [WebSocket](https://developer.mozilla
.org/docs/Web/API/WebSockets_API) and [MessagePack](http://msgpack.org), which is useful for soft real-time applications.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.adapters.memory.prototype.create" id="apidoc.element.fortune.adapters.memory.prototype.create">
        function <span class="apidocSignatureSpan">fortune.adapters.memory.prototype.</span>create
        <span class="apidocSignatureSpan">(type, records, meta)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (type, records, meta) {
  var Promise = promise.Promise
  var self = this
  var message = self.message
  var recordsPerType = self.options.recordsPerType
  var primaryKey = self.keys.primary
  var ConflictError = self.errors.ConflictError
  var collection = self.db[type]
  var i, j, record, id, ids, language

  if (!meta) meta = {}
  language = meta.language

  records = map(records, function (record) {
    return inputRecord.call(self, type, record)
  })

  // First check for collisions.
  for (i = 0, j = records.length; i &lt; j; i++) {
    record = records[i]
    id = record[primaryKey]

    if (collection.hasOwnProperty(id))
      return Promise.reject(new ConflictError(
        message('RecordExists', language, { id: id })))
  }

  // Then save it to memory.
  for (i = 0, j = records.length; i &lt; j; i++) {
    record = records[i]
    collection[record[primaryKey]] = record
  }

  // Clear least recently used records.
  if (recordsPerType) {
    ids = Object.keys(collection)

    if (ids.length &gt; recordsPerType) {
      ids = ids.slice(0, ids.length - recordsPerType)

      for (i = 0, j = ids.length; i &lt; j; i++)
        delete collection[ids[i]]
    }
  }

  return Promise.resolve(map(records, function (record) {
    return outputRecord.call(self, type, record)
  }))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```js
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.find(type, ids, options, include, meta)
store.<span class="apidocCodeKeywordSpan">create</span>(type, records, include, meta) // Records required.
store.update(type, updates, include, meta) // Updates required.
store.delete(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.adapters.memory.prototype.delete" id="apidoc.element.fortune.adapters.memory.prototype.delete">
        function <span class="apidocSignatureSpan">fortune.adapters.memory.prototype.</span>delete
        <span class="apidocSignatureSpan">(type, ids)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delete = function (type, ids) {
  var Promise = promise.Promise
  var collection = this.db[type]
  var count = 0
  var i, j, id

  if (ids &amp;&amp; !ids.length) return Adapter.prototype.delete.call(this)

  if (ids) for (i = 0, j = ids.length; i &lt; j; i++) {
    id = ids[i]
    if (collection[id]) {
      delete collection[id]
      count++
    }
  }

  else for (id in collection) {
    delete collection[id]
    count++
  }

  return Promise.resolve(count)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.find(type, ids, options, include, meta)
store.create(type, records, include, meta) // Records required.
store.update(type, updates, include, meta) // Updates required.
store.<span class="apidocCodeKeywordSpan">delete</span>(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```

The first method call to interact with the database will trigger a connection to the data store, and it returns the result as a
Promise. The specific methods wrap around the more general `request` method, see the [API documentation for `request`](http://fortune
.js.org/api/#fortune-request).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.adapters.memory.prototype.disconnect" id="apidoc.element.fortune.adapters.memory.prototype.disconnect">
        function <span class="apidocSignatureSpan">fortune.adapters.memory.prototype.</span>disconnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">disconnect = function () {
  var Promise = promise.Promise

  delete this.db
  return Promise.resolve()
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (self.connectionStatus !== 2)
  return Promise.reject(new Error('Instance has not been connected.'))

self.connectionStatus = 1

return new Promise(function (resolve, reject) {
  return self.adapter.<span class="apidocCodeKeywordSpan">disconnect</span>().then(function () {
    self.connectionStatus = 0
    self.emit(events.disconnect)
    return resolve(self)
  }, function (error) {
    self.connectionStatus = 2
    self.emit(events.failure)
    return reject(error)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.adapters.memory.prototype.find" id="apidoc.element.fortune.adapters.memory.prototype.find">
        function <span class="apidocSignatureSpan">fortune.adapters.memory.prototype.</span>find
        <span class="apidocSignatureSpan">(type, ids, options, meta)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">find = function (type, ids, options, meta) {
  var Promise = promise.Promise
  var self = this
  var recordTypes = self.recordTypes
  var fields = recordTypes[type]
  var collection = self.db[type]
  var records = []
  var i, j, id, record

  if (ids &amp;&amp; !ids.length) return Adapter.prototype.find.call(self)

  if (ids) for (i = 0, j = ids.length; i &lt; j; i++) {
    id = ids[i]
    if (collection.hasOwnProperty(id)) {
      record = collection[id]

      // LRU update.
      delete collection[id]
      collection[id] = record

      records.push(outputRecord.call(self, type, record))
    }
  }

  else for (id in collection)
    records.push(outputRecord.call(self, type, collection[id]))

  return Promise.resolve(applyOptions(fields, records, options, meta))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Fortune has 4 main methods: `find`, `create`, `update`, &amp; `delete`, which correspond to [CRUD](https://en.wikipedia.org/wiki
/Create,_read,_update_and_delete). The method signatures are as follows:

```js
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.<span class="apidocCodeKeywordSpan">find</span>(type, ids, options, include, meta)
store.create(type, records, include, meta) // Records required.
store.update(type, updates, include, meta) // Updates required.
store.delete(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.adapters.memory.prototype.update" id="apidoc.element.fortune.adapters.memory.prototype.update">
        function <span class="apidocSignatureSpan">fortune.adapters.memory.prototype.</span>update
        <span class="apidocSignatureSpan">(type, updates)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (type, updates) {
  var Promise = promise.Promise
  var self = this
  var primaryKey = self.keys.primary
  var collection = self.db[type]
  var count = 0
  var i, j, update, id, record

  if (!updates.length) return Adapter.prototype.update.call(self)

  for (i = 0, j = updates.length; i &lt; j; i++) {
    update = updates[i]
    id = update[primaryKey]
    record = collection[id]

    if (!record) continue

    count++
    record = outputRecord.call(self, type, record)

    applyUpdate(record, update)

    // LRU update.
    delete collection[id]

    collection[id] = inputRecord.call(self, type, record)
  }

  return Promise.resolve(count)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```js
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.find(type, ids, options, include, meta)
store.create(type, records, include, meta) // Records required.
store.<span class="apidocCodeKeywordSpan">update</span>(type, updates, include, meta) // Updates required.
store.delete(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```

The first method call to interact with the database will trigger a connection to the data store, and it returns the result as a
Promise. The specific methods wrap around the more general `request` method, see the [API documentation for `request`](http://fortune
.js.org/api/#fortune-request).
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.common" id="apidoc.module.fortune.common">module fortune.common</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.common.applyOptions" id="apidoc.element.fortune.common.applyOptions">
        function <span class="apidocSignatureSpan">fortune.common.</span>applyOptions
        <span class="apidocSignatureSpan">(fields, records, options, meta)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">applyOptions = function (fields, records, options, meta) {
  var count, record, field, isInclude, isExclude, language, memoizedRecords
  var i, j

  if (!options) options = {}
  if (!meta) meta = {}

  language = meta.language

  // Apply filters.
  if (options) {
    memoizedRecords = records
    records = []
    for (i = 0, j = memoizedRecords.length; i &lt; j; i++) {
      record = memoizedRecords[i]
      if (match(fields, options, record))
        records.push(record)
    }
  }

  count = records.length

  if ('fields' in options) {
    isInclude = !find(Object.keys(options.fields),
      function (field) { return !options.fields[field] })
    isExclude = !find(Object.keys(options.fields),
      function (field) { return options.fields[field] })

    if (!isInclude &amp;&amp; !isExclude)
      throw new BadRequestError(message('FieldsFormat', language))

    for (i = 0, j = records.length; i &lt; j; i++) {
      record = records[i]
      for (field in record) {
        if (field === primaryKey) continue
        if ((isInclude &amp;&amp; !(options.fields.hasOwnProperty(field))) ||
          (isExclude &amp;&amp; options.fields.hasOwnProperty(field)))
          delete record[field]
      }
    }
  }

  if ('sort' in options)
    records = records.sort(compare(fields, options.sort))

  if ('limit' in options || 'offset' in options)
    records = records.slice(options.offset, options.limit ?
      (options.offset || 0) + options.limit : records.length)

  records.count = count

  return records
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.common.generateId" id="apidoc.element.fortune.common.generateId">
        function <span class="apidocSignatureSpan">fortune.common.</span>generateId
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function generateId() {
  return Date.now() + '-' +
    ('00000000' + Math.floor(Math.random() * Math.pow(2, 32)).toString(16))
    .slice(-8)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.errors" id="apidoc.module.fortune.errors">module fortune.errors</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.errors.BadRequestError" id="apidoc.element.fortune.errors.BadRequestError">
        function <span class="apidocSignatureSpan">fortune.errors.</span>BadRequestError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BadRequestError() { if (!(this instanceof BadRequestError)) return new (BadRequestError.bind.apply(BadRequestError, Array
.prototype.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.ConflictError" id="apidoc.element.fortune.errors.ConflictError">
        function <span class="apidocSignatureSpan">fortune.errors.</span>ConflictError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ConflictError() { if (!(this instanceof ConflictError)) return new (ConflictError.bind.apply(ConflictError, Array.prototype
.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.ForbiddenError" id="apidoc.element.fortune.errors.ForbiddenError">
        function <span class="apidocSignatureSpan">fortune.errors.</span>ForbiddenError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ForbiddenError() { if (!(this instanceof ForbiddenError)) return new (ForbiddenError.bind.apply(ForbiddenError, Array.prototype
.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.MethodError" id="apidoc.element.fortune.errors.MethodError">
        function <span class="apidocSignatureSpan">fortune.errors.</span>MethodError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MethodError() { if (!(this instanceof MethodError)) return new (MethodError.bind.apply(MethodError, Array.prototype.concat
.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.NotAcceptableError" id="apidoc.element.fortune.errors.NotAcceptableError">
        function <span class="apidocSignatureSpan">fortune.errors.</span>NotAcceptableError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function NotAcceptableError() { if (!(this instanceof NotAcceptableError)) return new (NotAcceptableError.bind.apply(NotAcceptableError
, Array.prototype.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.NotFoundError" id="apidoc.element.fortune.errors.NotFoundError">
        function <span class="apidocSignatureSpan">fortune.errors.</span>NotFoundError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function NotFoundError() { if (!(this instanceof NotFoundError)) return new (NotFoundError.bind.apply(NotFoundError, Array.prototype
.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.UnauthorizedError" id="apidoc.element.fortune.errors.UnauthorizedError">
        function <span class="apidocSignatureSpan">fortune.errors.</span>UnauthorizedError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function UnauthorizedError() { if (!(this instanceof UnauthorizedError)) return new (UnauthorizedError.bind.apply(UnauthorizedError
, Array.prototype.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.UnprocessableError" id="apidoc.element.fortune.errors.UnprocessableError">
        function <span class="apidocSignatureSpan">fortune.errors.</span>UnprocessableError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function UnprocessableError() { if (!(this instanceof UnprocessableError)) return new (UnprocessableError.bind.apply(UnprocessableError
, Array.prototype.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.UnsupportedError" id="apidoc.element.fortune.errors.UnsupportedError">
        function <span class="apidocSignatureSpan">fortune.errors.</span>UnsupportedError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function UnsupportedError() { if (!(this instanceof UnsupportedError)) return new (UnsupportedError.bind.apply(UnsupportedError,
Array.prototype.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.errors.nativeErrors" id="apidoc.module.fortune.errors.nativeErrors">module fortune.errors.nativeErrors</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.errors.nativeErrors.0" id="apidoc.element.fortune.errors.nativeErrors.0">
        function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>0
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Error() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.nativeErrors.1" id="apidoc.element.fortune.errors.nativeErrors.1">
        function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>1
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TypeError() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.nativeErrors.2" id="apidoc.element.fortune.errors.nativeErrors.2">
        function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>2
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ReferenceError() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.nativeErrors.3" id="apidoc.element.fortune.errors.nativeErrors.3">
        function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>3
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RangeError() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.nativeErrors.4" id="apidoc.element.fortune.errors.nativeErrors.4">
        function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>4
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SyntaxError() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.nativeErrors.5" id="apidoc.element.fortune.errors.nativeErrors.5">
        function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>5
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EvalError() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.errors.nativeErrors.6" id="apidoc.element.fortune.errors.nativeErrors.6">
        function <span class="apidocSignatureSpan">fortune.errors.nativeErrors.</span>6
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function URIError() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.index" id="apidoc.module.fortune.index">module fortune.index</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.index.assign" id="apidoc.element.fortune.index.assign">
        function <span class="apidocSignatureSpan">fortune.index.</span>assign
        <span class="apidocSignatureSpan">(target)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function assign(target) {
  var i, j, key, source

  for (i = 1, j = arguments.length; i &lt; j; i++) {
    source = arguments[i]

    if (source == null) continue

    for (key in source)
      target[key] = source[key]
  }

  return target
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.castToNumber" id="apidoc.element.fortune.index.castToNumber">
        function <span class="apidocSignatureSpan">fortune.index.</span>castToNumber
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function castToNumber(id) {
  // Stolen from jQuery source code:
  // https://api.jquery.com/jQuery.isNumeric/
  var float = Number.parseFloat(id)
  return id - float + 1 &gt;= 0 ? float : id
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.castValue" id="apidoc.element.fortune.index.castValue">
        function <span class="apidocSignatureSpan">fortune.index.</span>castValue
        <span class="apidocSignatureSpan">(value, type, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function castValue(value, type, options) {
  var i, j, pair, cast

  // Special case for empty string: it should be null.
  if (value === '') return null

  if (type)
    for (i = 0, j = castByType.length; i &lt; j; i++) {
      pair = castByType[i]
      if (pair[0] === type) {
        cast = pair[1]
        break
      }
    }
  else return castToNumber(value)

  return cast &amp;&amp; value !== null ? cast(value, options) : value
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.clone" id="apidoc.element.fortune.index.clone">
        function <span class="apidocSignatureSpan">fortune.index.</span>clone
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clone(input) {
  var output, key, value, isArray

  if (Array.isArray(input)) isArray = true
  else if (input == null || Object.getPrototypeOf(input) !== Object.prototype)
    return input

  output = isArray ? [] : {}

  for (key in input) {
    value = input[key]
    output[key] = value !== null &amp;&amp; value !== undefined &amp;&amp;
      Object.getPrototypeOf(value) === Object.prototype ||
      Array.isArray(value) ? clone(value) : value
  }

  return output
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.deepEqual" id="apidoc.element.fortune.index.deepEqual">
        function <span class="apidocSignatureSpan">fortune.index.</span>deepEqual
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deepEqual(a, b) {
  var key, value, compare, aLength = 0, bLength = 0

  // If they are the same object, don't need to go further.
  if (a === b) return true

  // Both objects must be defined.
  if (!a || !b) return false

  // Objects must be of the same type.
  if (a.prototype !== b.prototype) return false

  for (key in a) {
    aLength++
    value = a[key]
    compare = b[key]

    if (typeof value === 'object') {
      if (typeof compare !== 'object' || !deepEqual(value, compare))
        return false
      continue
    }

    if (Buffer.isBuffer(value)) {
      if (!Buffer.isBuffer(compare) || !value.equals(compare))
        return false
      continue
    }

    if (value &amp;&amp; typeof value.getTime === 'function') {
      if (!compare || typeof compare.getTime !== 'function' ||
        value.getTime() !== compare.getTime())
        return false
      continue
    }

    if (value !== compare) return false
  }

  for (key in b) bLength++

  // Keys must be of same length.
  return aLength === bLength
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.filter" id="apidoc.element.fortune.index.filter">
        function <span class="apidocSignatureSpan">fortune.index.</span>filter
        <span class="apidocSignatureSpan">(array, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function filter(array, fn) {
  var i, j, k = [], l = 0

  for (i = 0, j = array.length; i &lt; j; i++)
    if (fn(array[i], i, array))
      k[l++] = array[i]

  return k
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (listners) {
    delete listners[type];
    if (!Object.keys(listners).length) return off.call(that);
  }
} else {
  listners = getListeners(that, type, true);
  if (listners) {
    listners = listners.<span class="apidocCodeKeywordSpan">filter</span>(ne);
    if (!listners.length) return off.call(that, type);
    that[LISTENERS][type] = listners;
  }
}
return that;

function ne(test) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.find" id="apidoc.element.fortune.index.find">
        function <span class="apidocSignatureSpan">fortune.index.</span>find
        <span class="apidocSignatureSpan">(array, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function find(array, fn) {
  var i, j, value, result

  for (i = 0, j = array.length; i &lt; j; i++) {
    value = array[i]
    result = fn(value)
    if (result) return value
  }

  return void 0
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Fortune has 4 main methods: `find`, `create`, `update`, &amp; `delete`, which correspond to [CRUD](https://en.wikipedia.org/wiki
/Create,_read,_update_and_delete). The method signatures are as follows:

```js
// The first argument `type` is always required. The optional `include`
// argument is used for finding related records in the same request and is
// documented in the `request` method, and the optional `meta` is specific to
// the adapter. All methods return promises.
store.<span class="apidocCodeKeywordSpan">find</span>(type, ids, options, include, meta)
store.create(type, records, include, meta) // Records required.
store.update(type, updates, include, meta) // Updates required.
store.delete(type, ids, include, meta)

// For example...
store.find('user', 123).then(results =&gt; { ... })
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.generateId" id="apidoc.element.fortune.index.generateId">
        function <span class="apidocSignatureSpan">fortune.index.</span>generateId
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function generateId() {
  return Date.now() + '-' +
    ('00000000' + Math.floor(Math.random() * Math.pow(2, 32)).toString(16))
    .slice(-8)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.includes" id="apidoc.element.fortune.index.includes">
        function <span class="apidocSignatureSpan">fortune.index.</span>includes
        <span class="apidocSignatureSpan">(array, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function includes(array, value) {
  var i, j

  for (i = 0, j = array.length; i &lt; j; i++)
    if (array[i] === value) return true

  return false
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.map" id="apidoc.element.fortune.index.map">
        function <span class="apidocSignatureSpan">fortune.index.</span>map
        <span class="apidocSignatureSpan">(array, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function map(array, fn) {
  var i, j, k = [], l = 0

  for (i = 0, j = array.length; i &lt; j; i++)
    k[l++] = fn(array[i], i, array)

  return k
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
store.on(change, data =&gt; {
  stderr.info(chalk.bold('Change event:'), data)
})

return store.connect()

// Delete all previous records.
.then(() =&gt; Promise.all(Object.keys(fixtures).<span class="apidocCodeKeywordSpan">map</span>(type =&gt;
  store.adapter.delete(type)
)))

// Create fixtures.
.then(() =&gt; Promise.all(Object.keys(fixtures).map(type =&gt;
  store.adapter.create(type, fixtures[type])
)))
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.message" id="apidoc.element.fortune.index.message">
        function <span class="apidocSignatureSpan">fortune.index.</span>message
        <span class="apidocSignatureSpan">(id, language, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function message(id, language, data) {
  var str, key, subtag

  if (!message.hasOwnProperty(language)) {
    subtag = language &amp;&amp; language.match(/.+?(?=-)/)
    if (subtag) subtag = subtag[0]
    if (message.hasOwnProperty(subtag)) language = subtag
    else language = message.defaultLanguage
  }

  if (!message[language].hasOwnProperty(id))
    return message[language][genericMessage] || message.en[genericMessage]

  str = message[language][id]

  for (key in data) str = str.replace('{' + key + '}', data[key])

  return str
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.pull" id="apidoc.element.fortune.index.pull">
        function <span class="apidocSignatureSpan">fortune.index.</span>pull
        <span class="apidocSignatureSpan">(array, values)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pull(array, values) {
  var hash = {}, clone = [], value
  var i, j

  if (Array.isArray(values))
    for (i = 0, j = values.length; i &lt; j; i++)
      hash[values[i]] = true
  else hash[values] = true

  // Need to iterate backwards.
  for (i = array.length; i--;) {
    value = array[i]
    if (!hash.hasOwnProperty(value)) clone.push(value)
  }

  return clone
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.reduce" id="apidoc.element.fortune.index.reduce">
        function <span class="apidocSignatureSpan">fortune.index.</span>reduce
        <span class="apidocSignatureSpan">(array, fn, initialValue)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function reduce(array, fn, initialValue) {
  var i, j, k = initialValue

  for (i = 0, j = array.length; i &lt; j; i++)
    k = fn(k, array[i], i, array)

  return k
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.index.unique" id="apidoc.element.fortune.index.unique">
        function <span class="apidocSignatureSpan">fortune.index.</span>unique
        <span class="apidocSignatureSpan">(a)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function unique(a) {
  var seen = {}
  var result = []
  var i, j, k

  for (i = 0, j = a.length; i &lt; j; i++) {
    k = a[i]
    if (seen.hasOwnProperty(k)) continue
    result.push(k)
    seen[k] = true
  }

  return result
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.promise" id="apidoc.module.fortune.promise">module fortune.promise</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.promise.Promise" id="apidoc.element.fortune.promise.Promise">
        function <span class="apidocSignatureSpan">fortune.promise.</span>Promise
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Promise() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.response_classes" id="apidoc.module.fortune.response_classes">module fortune.response_classes</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.response_classes.BadRequestError" id="apidoc.element.fortune.response_classes.BadRequestError">
        function <span class="apidocSignatureSpan">fortune.response_classes.</span>BadRequestError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BadRequestError() { if (!(this instanceof BadRequestError)) return new (BadRequestError.bind.apply(BadRequestError, Array
.prototype.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.response_classes.ConflictError" id="apidoc.element.fortune.response_classes.ConflictError">
        function <span class="apidocSignatureSpan">fortune.response_classes.</span>ConflictError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ConflictError() { if (!(this instanceof ConflictError)) return new (ConflictError.bind.apply(ConflictError, Array.prototype
.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.response_classes.Created" id="apidoc.element.fortune.response_classes.Created">
        function <span class="apidocSignatureSpan">fortune.response_classes.</span>Created
        <span class="apidocSignatureSpan">(x)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Created(x) { assign(this, x) }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.response_classes.Empty" id="apidoc.element.fortune.response_classes.Empty">
        function <span class="apidocSignatureSpan">fortune.response_classes.</span>Empty
        <span class="apidocSignatureSpan">(x)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Empty(x) { assign(this, x) }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.response_classes.ForbiddenError" id="apidoc.element.fortune.response_classes.ForbiddenError">
        function <span class="apidocSignatureSpan">fortune.response_classes.</span>ForbiddenError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ForbiddenError() { if (!(this instanceof ForbiddenError)) return new (ForbiddenError.bind.apply(ForbiddenError, Array.prototype
.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.response_classes.MethodError" id="apidoc.element.fortune.response_classes.MethodError">
        function <span class="apidocSignatureSpan">fortune.response_classes.</span>MethodError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MethodError() { if (!(this instanceof MethodError)) return new (MethodError.bind.apply(MethodError, Array.prototype.concat
.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.response_classes.NotAcceptableError" id="apidoc.element.fortune.response_classes.NotAcceptableError">
        function <span class="apidocSignatureSpan">fortune.response_classes.</span>NotAcceptableError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function NotAcceptableError() { if (!(this instanceof NotAcceptableError)) return new (NotAcceptableError.bind.apply(NotAcceptableError
, Array.prototype.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.response_classes.NotFoundError" id="apidoc.element.fortune.response_classes.NotFoundError">
        function <span class="apidocSignatureSpan">fortune.response_classes.</span>NotFoundError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function NotFoundError() { if (!(this instanceof NotFoundError)) return new (NotFoundError.bind.apply(NotFoundError, Array.prototype
.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.response_classes.OK" id="apidoc.element.fortune.response_classes.OK">
        function <span class="apidocSignatureSpan">fortune.response_classes.</span>OK
        <span class="apidocSignatureSpan">(x)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function OK(x) { assign(this, x) }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.response_classes.UnauthorizedError" id="apidoc.element.fortune.response_classes.UnauthorizedError">
        function <span class="apidocSignatureSpan">fortune.response_classes.</span>UnauthorizedError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function UnauthorizedError() { if (!(this instanceof UnauthorizedError)) return new (UnauthorizedError.bind.apply(UnauthorizedError
, Array.prototype.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.response_classes.UnprocessableError" id="apidoc.element.fortune.response_classes.UnprocessableError">
        function <span class="apidocSignatureSpan">fortune.response_classes.</span>UnprocessableError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function UnprocessableError() { if (!(this instanceof UnprocessableError)) return new (UnprocessableError.bind.apply(UnprocessableError
, Array.prototype.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.response_classes.UnsupportedError" id="apidoc.element.fortune.response_classes.UnsupportedError">
        function <span class="apidocSignatureSpan">fortune.response_classes.</span>UnsupportedError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function UnsupportedError() { if (!(this instanceof UnsupportedError)) return new (UnsupportedError.bind.apply(UnsupportedError,
Array.prototype.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.success" id="apidoc.module.fortune.success">module fortune.success</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.success.Created" id="apidoc.element.fortune.success.Created">
        function <span class="apidocSignatureSpan">fortune.success.</span>Created
        <span class="apidocSignatureSpan">(x)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Created(x) { assign(this, x) }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.success.Empty" id="apidoc.element.fortune.success.Empty">
        function <span class="apidocSignatureSpan">fortune.success.</span>Empty
        <span class="apidocSignatureSpan">(x)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Empty(x) { assign(this, x) }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.success.OK" id="apidoc.element.fortune.success.OK">
        function <span class="apidocSignatureSpan">fortune.success.</span>OK
        <span class="apidocSignatureSpan">(x)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function OK(x) { assign(this, x) }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.fortune.update_helpers" id="apidoc.module.fortune.update_helpers">module fortune.update_helpers</a></h1>


    <h2>
        <a href="#apidoc.element.fortune.update_helpers.addId" id="apidoc.element.fortune.update_helpers.addId">
        function <span class="apidocSignatureSpan">fortune.update_helpers.</span>addId
        <span class="apidocSignatureSpan">(id, update, field, isArray)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addId = function (id, update, field, isArray) {
  if (isArray) {
    if (!update.push) update.push = {}
    if (!update.push[field]) update.push[field] = []
    update.push[field].push(id)
    return
  }

  if (!update.replace) update.replace = {}
  update.replace[field] = id
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.update_helpers.getUpdate" id="apidoc.element.fortune.update_helpers.getUpdate">
        function <span class="apidocSignatureSpan">fortune.update_helpers.</span>getUpdate
        <span class="apidocSignatureSpan">(type, id, updates, cache)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUpdate = function (type, id, updates, cache) {
  var update

  if (cache[type] &amp;&amp; cache[type][id])
    return find(updates[type],
      function (update) {
        return update[primaryKey] === id
      })

  update = { id: id }
  if (!updates[type]) updates[type] = []
  updates[type].push(update)
  cache[type] = {}
  cache[type][id] = true
  return update
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.update_helpers.removeId" id="apidoc.element.fortune.update_helpers.removeId">
        function <span class="apidocSignatureSpan">fortune.update_helpers.</span>removeId
        <span class="apidocSignatureSpan">(id, update, field, isArray)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeId = function (id, update, field, isArray) {
  if (isArray) {
    if (!update.pull) update.pull = {}
    if (!update.pull[field]) update.pull[field] = []
    update.pull[field].push(id)
    return
  }

  if (!update.replace) update.replace = {}
  update.replace[field] = null
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.fortune.update_helpers.scrubDenormalizedUpdates" id="apidoc.element.fortune.update_helpers.scrubDenormalizedUpdates">
        function <span class="apidocSignatureSpan">fortune.update_helpers.</span>scrubDenormalizedUpdates
        <span class="apidocSignatureSpan">(updates, denormalizedFields)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scrubDenormalizedUpdates = function (updates, denormalizedFields) {
  var i, update, operation, field

  // Iterate in reverse, so we can easily remove indices in the array.
  for (i = updates.length; i--;) {
    update = updates[i]

    for (operation in update) {
      if (operation === primaryKey) continue

      for (field in update[operation])
        if (field in denormalizedFields)
          delete update[operation][field]

      if (!Object.keys(update[operation]).length)
        delete update[operation]
    }

    // If only the primary key is present, then remove the entire update.
    if (Object.keys(update).length === 1) updates.splice(i, 1)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>